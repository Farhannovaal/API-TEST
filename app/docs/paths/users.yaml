paths:
  /users:
    get:
      tags: [User]
      summary: List users
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  success: { type: boolean, example: true }
                  data:
                    type: array
                    items: { $ref: '#/components/schemas/User' }
    post:
      tags: [User]
      summary: Create user
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/UserCreate' }
      responses:
        201: { description: Created }
        409:
          description: Duplicate email
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ApiError' }
        422:
          description: Validation error
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ValidationError' }

  /users/{id}:
    get:
      tags: [User]
      summary: Get user by ID
      parameters: [ { $ref: '#/components/parameters/PathId' } ]
      responses:
        200: { description: OK }
        404: { description: Not found }
    put:
      tags: [User]
      summary: Update user by ID
      parameters: [ { $ref: '#/components/parameters/PathId' } ]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/UserUpdate' }
      responses:
        200: { description: OK }
        404: { description: Not found }
        409:
          description: Duplicate email
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ApiError' }
        422:
          description: Validation error
          content:
            application/json:
              schema: { $ref: '#/components/schemas/ValidationError' }
    delete:
      tags: [User]
      summary: Delete user by ID
      parameters: [ { $ref: '#/components/parameters/PathId' } ]
      responses:
        200: { description: Deleted }
        404: { description: Not found }
